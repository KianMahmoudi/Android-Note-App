package com.example.note;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.CheckBox;import android.widget.ImageView;import android.widget.TextView;import androidx.annotation.Nullable;import androidx.appcompat.app.AppCompatActivity;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;import androidx.room.Room;import com.google.android.material.textfield.TextInputEditText;import java.util.ArrayList;import java.util.List;public class ListNoteActivity extends AppCompatActivity {    private RecyclerView recyclerView;    private ListNoteItemsAdapter adapter;    private List<ListNoteItems> items;    private AppDatabase db;    private TextView title;    @Override    protected void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.list_note);        ImageView btnClose = findViewById(R.id.btn_close_simpleNote);        btnClose.setOnClickListener(v -> finish());        recyclerView = findViewById(R.id.recyclerViewItems);        recyclerView.setLayoutManager(new LinearLayoutManager(this));        items = new ArrayList<>();        adapter = new ListNoteItemsAdapter(items, this);        recyclerView.setAdapter(adapter);        title = findViewById(R.id.note_title);        db = Room.databaseBuilder(getApplicationContext(),                AppDatabase.class, "notes").allowMainThreadQueries().build();        if (!getIntent().hasExtra("id")) {            adapter.addItem(new ListNoteItems("", false));            adapter.notifyItemInserted(0);        }        if (getIntent().hasExtra("id")) {            long id = getIntent().getLongExtra("id", 0);            ListNote listNote = db.getListNoteDao().getById(id);            if (listNote != null) {                title.setText(listNote.getTitle());                adapter.setItems(listNote.getItems());            }        }        findViewById(R.id.fab_addCheckbox).setOnClickListener(v -> {            adapter.addItem(new ListNoteItems("", false));            adapter.notifyItemInserted(0);        });        findViewById(R.id.fab_save_listNote).setOnClickListener(v -> {            String titleText = title.getText().toString();            List<ListNoteItems> items = new ArrayList<>();            for (int i = 0; i < recyclerView.getChildCount(); i++) {                View view = recyclerView.getChildAt(i);                TextInputEditText editText = view.findViewById(R.id.editText);                CheckBox checkBox = view.findViewById(R.id.checkBox);                if (editText != null && checkBox != null) {                    String itemText = editText.getText().toString();                    boolean isChecked = checkBox.isChecked();                    if (itemText != null) {                        ListNoteItems item = new ListNoteItems(itemText, isChecked);                        if (item != null) {                            items.add(item);                        }                    }                }            }            adapter.setItems(items);            if (getIntent().hasExtra("id")) {                long id = getIntent().getLongExtra("id", 0);                ListNote listNote = db.getListNoteDao().getById(id);                listNote.setTitle(titleText);                listNote.setItems(adapter.getItems());                db.getListNoteDao().update(listNote);            } else {                ListNote note = new ListNote(titleText, adapter.getItems());                db.getListNoteDao().insert(note);            }            Intent i = new Intent(this, HomePage.class);            i.putExtra("class", "listNote");            startActivity(i);            finish();        });    }}