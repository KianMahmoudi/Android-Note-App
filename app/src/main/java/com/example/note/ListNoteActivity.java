package com.example.note;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.CheckBox;import android.widget.ImageView;import android.widget.TextView;import androidx.annotation.Nullable;import androidx.appcompat.app.AppCompatActivity;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;import androidx.room.Room;import com.google.android.material.textfield.TextInputEditText;import java.util.ArrayList;import java.util.List;public class ListNoteActivity extends AppCompatActivity {    private RecyclerView recyclerView;    private ListNoteItemsAdapter adapter;    private List<ListNoteItems> items;    private AppDatabase db;    private TextView title;    @Override    protected void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.list_note);        ImageView btnClose = findViewById(R.id.btn_close_simpleNote);        btnClose.setOnClickListener(v -> navigateToHomePage());        recyclerView = findViewById(R.id.recyclerViewItems);        recyclerView.setLayoutManager(new LinearLayoutManager(this));        items = new ArrayList<>();        adapter = new ListNoteItemsAdapter(items, this);        recyclerView.setAdapter(adapter);        title = findViewById(R.id.note_title);        db = Room.databaseBuilder(getApplicationContext(), AppDatabase.class, "notes")                .allowMainThreadQueries()                .build();        if (getIntent().hasExtra("id")) {            long id = getIntent().getLongExtra("id", 0);            ListNote listNote = db.getListNoteDao().getById(id);            if (listNote != null) {                title.setText(listNote.getTitle());                adapter.setItems(listNote.getItems());            }        } else {            addItemToList(new ListNoteItems("", false));        }        findViewById(R.id.fab_addCheckbox).setOnClickListener(v -> addItemToList(new ListNoteItems("", false)));        findViewById(R.id.fab_save_listNote).setOnClickListener(v -> saveListNote());    }    private void addItemToList(ListNoteItems item) {        adapter.addItem(item);        adapter.notifyItemInserted(adapter.getItemCount() - 1);    }    private void saveListNote() {        String titleText = title.getText().toString();        List<ListNoteItems> items = adapter.getItems();  // دریافت لیست آیتم‌ها از آداپتر        if (getIntent().hasExtra("id")) {            long id = getIntent().getLongExtra("id", 0);            ListNote listNote = db.getListNoteDao().getById(id);            if (listNote != null) {                listNote.setTitle(titleText);                listNote.setItems(items);                db.getListNoteDao().update(listNote);            }        } else {            ListNote note = new ListNote(titleText, items);            db.getListNoteDao().insert(note);        }        navigateToHomePage();    }    private void navigateToHomePage() {        Intent i = new Intent(this, HomePage.class);        i.putExtra("class", "listNote");        startActivity(i);        finish();    }}